import matplotlib.pyplot as plt
import numpy as np

data=0

rsw_times=[(1, 106, 7.867813110351562e-06, 9.5367431640625e-07), (1, 212, 8.106231689453125e-06, 0.0), (1, 317, 1.0251998901367188e-05, 1.5020370483398438e-05), (1, 424, 1.2874603271484375e-05, 1.71661376953125e-05), (1, 532, 1.6927719116210938e-05, 2.002716064453125e-05), (1, 639, 1.8835067749023438e-05, 2.4080276489257812e-05), (1, 745, 2.2172927856445312e-05, 2.574920654296875e-05), (1, 851, 2.574920654296875e-05, 3.0040740966796875e-05), (1, 958, 3.1948089599609375e-05, 3.719329833984375e-05), (1, 1066, 3.981590270996094e-05, 4.220008850097656e-05), (1, 1173, 4.696846008300781e-05, 4.887580871582031e-05), (1, 1279, 5.412101745605469e-05, 5.5789947509765625e-05), (1, 1386, 5.817413330078125e-05, 5.984306335449219e-05), (1, 1491, 6.890296936035156e-05, 7.081031799316406e-05), (1, 1597, 7.414817810058594e-05, 7.605552673339844e-05), (1, 1703, 8.106231689453125e-05, 8.511543273925781e-05), (1, 1809, 9.393692016601562e-05, 9.393692016601562e-05), (1, 1914, 0.0001049041748046875, 0.00010204315185546875), (1, 2021, 0.00011610984802246094, 0.00011181831359863281), (1, 2128, 0.00012493133544921875, 0.0001251697540283203), (2, 106, 1.9788742065429688e-05, 0.0), (2, 212, 4.00543212890625e-05, 9.5367431640625e-07), (2, 317, 6.389617919921875e-05, 9.799003601074219e-05), (2, 424, 9.274482727050781e-05, 0.0001289844512939453), (2, 532, 0.00011873245239257812, 0.0001590251922607422), (2, 639, 0.00014591217041015625, 0.00019097328186035156), (2, 745, 0.000186920166015625, 0.0002288818359375), (2, 851, 0.00025200843811035156, 0.00026798248291015625), (2, 958, 0.0002999305725097656, 0.0003440380096435547), (2, 1066, 0.0003349781036376953, 0.00037384033203125), (2, 1173, 0.00042510032653808594, 0.00046706199645996094), (2, 1279, 0.00048613548278808594, 0.0005199909210205078), (2, 1386, 0.0005280971527099609, 0.0005671977996826172), (2, 1491, 0.0006549358367919922, 0.0006952285766601562), (2, 1597, 0.0006909370422363281, 0.0007250308990478516), (2, 1703, 0.0007989406585693359, 0.0008351802825927734), (2, 1809, 0.000865936279296875, 0.0009319782257080078), (2, 1914, 0.0010218620300292969, 0.001013040542602539), (2, 2021, 0.001096963882446289, 0.0011410713195800781), (2, 2128, 0.0012040138244628906, 0.0012319087982177734), (3, 106, 2.7179718017578125e-05, 9.5367431640625e-07), (3, 212, 0.00011610984802246094, 9.5367431640625e-07), (3, 317, 0.00023603439331054688, 0.0010061264038085938), (3, 424, 0.00046706199645996094, 0.0012679100036621094), (3, 532, 0.0007832050323486328, 0.0015597343444824219), (3, 639, 0.0011920928955078125, 0.0018830299377441406), (3, 745, 0.001753091812133789, 0.002258777618408203), (3, 851, 0.0023818016052246094, 0.0026292800903320312), (3, 958, 0.003531217575073242, 0.003267049789428711), (3, 1066, 0.0034720897674560547, 0.003744840621948242), (3, 1173, 0.004257917404174805, 0.004533052444458008), (3, 1279, 0.004960060119628906, 0.005156040191650391), (3, 1386, 0.005377054214477539, 0.005666017532348633), (3, 1491, 0.006384134292602539, 0.006530046463012695), (3, 1597, 0.007039070129394531, 0.00718998908996582), (3, 1703, 0.008224964141845703, 0.008250951766967773), (3, 1809, 0.008914947509765625, 0.00909113883972168), (3, 1914, 0.010283946990966797, 0.010090827941894531), (3, 2021, 0.010949134826660156, 0.011074066162109375), (3, 2128, 0.012431859970092773, 0.012121915817260742), (4, 106, 3.1948089599609375e-05, 1.1920928955078125e-06), (4, 212, 0.00011396408081054688, 0.0), (4, 317, 0.0002429485321044922, 0.010015010833740234), (4, 424, 0.0004711151123046875, 0.012662649154663086), (4, 532, 0.0007750988006591797, 0.015603780746459961), (4, 639, 0.0011773109436035156, 0.018938779830932617), (4, 745, 0.0017139911651611328, 0.02255702018737793), (4, 851, 0.002380847930908203, 0.026166200637817383), (4, 958, 0.003570079803466797, 0.03250288963317871), (4, 1066, 0.004520893096923828, 0.0373690128326416), (4, 1173, 0.006112098693847656, 0.0453948974609375), (4, 1279, 0.007878303527832031, 0.05178380012512207), (4, 1386, 0.009167194366455078, 0.05650901794433594), (4, 1491, 0.011605024337768555, 0.06517982482910156), (4, 1597, 0.013608217239379883, 0.07191991806030273), (4, 1703, 0.016856908798217773, 0.08270001411437988), (4, 1809, 0.019603967666625977, 0.09063720703125), (4, 1914, 0.02360224723815918, 0.10089492797851562), (4, 2021, 0.026855945587158203, 0.11068105697631836), (4, 2128, 0.031006813049316406, 0.12123274803161621), (5, 106, 3.2901763916015625e-05, 0.0), (5, 212, 0.00012087821960449219, 0.0), (5, 317, 0.00023603439331054688, 0.10243701934814453), (5, 424, 0.00047516822814941406, 0.12688994407653809), (5, 532, 0.0007798671722412109, 0.15613007545471191), (5, 639, 0.0012021064758300781, 0.18884587287902832), (5, 745, 0.0017299652099609375, 0.2246699333190918), (5, 851, 0.0023937225341796875, 0.26171112060546875), (5, 958, 0.003453969955444336, 0.3262979984283447), (5, 1066, 0.004465818405151367, 0.3737940788269043), (5, 1173, 0.006120920181274414, 0.45363306999206543), (5, 1279, 0.007745981216430664, 0.5148510932922363), (5, 1386, 0.009106874465942383, 0.5649881362915039), (5, 1491, 0.011507034301757812, 0.6513440608978271), (5, 1597, 0.013788938522338867, 0.7193799018859863), (5, 1703, 0.016952037811279297, 0.8279528617858887), (5, 1809, 0.019884109497070312, 0.9049580097198486), (5, 1914, 0.02361011505126953, 1.011206865310669), (5, 2021, 0.026952266693115234, 1.1056458950042725), (5, 2128, 0.03091287612915039, 1.2149429321289062), (6, 106, 3.314018249511719e-05, 9.5367431640625e-07), (6, 212, 0.00012302398681640625, 0.0), (6, 317, 0.000244140625, 1.003127098083496), (6, 424, 0.00046896934509277344, 1.2681388854980469), (6, 532, 0.0007450580596923828, 1.5590107440948486), (6, 639, 0.0011959075927734375, 1.8913660049438477), (6, 745, 0.0017209053039550781, 2.251800060272217), (6, 851, 0.002438068389892578, 2.6177430152893066), (6, 958, 0.003461122512817383, 3.252285957336426), (6, 1066, 0.004441738128662109, 3.7420620918273926), (6, 1173, 0.006151914596557617, 4.516355037689209), (6, 1279, 0.007887125015258789, 5.1598827838897705), (6, 1386, 0.009181976318359375, 5.656574249267578), (6, 1491, 0.011800765991210938, 6.5156333446502686), (6, 1597, 0.013680219650268555, 7.207763910293579), (6, 1703, 0.017055988311767578, 8.293004035949707), (6, 1809, 0.019746065139770508, 9.080931901931763), (6, 1914, 0.02398395538330078, 10.121089696884155), (6, 2021, 0.027070045471191406, 11.083400964736938), (6, 2128, 0.03131294250488281, 12.16826605796814), (7, 106, 3.409385681152344e-05, 9.5367431640625e-07), (7, 212, 0.00011491775512695312, 0.0), (7, 317, 0.0002472400665283203, 10.039126634597778), (7, 424, 0.0004961490631103516, 12.703859806060791), (7, 532, 0.0007958412170410156, 15.698026895523071), (7, 639, 0.0011951923370361328, 18.94458270072937), (7, 745, 0.0017998218536376953, 22.546534299850464), (7, 851, 0.0024290084838867188, 26.21537470817566), (7, 958, 0.0034461021423339844, 32.571951150894165), (7, 1066, 0.004465818405151367, 37.457273960113525), (7, 1173, 0.006245851516723633, 45.33328819274902), (7, 1279, 0.007933855056762695, 51.551284074783325), (7, 1386, 0.009170055389404297, 56.64372992515564), (7, 1491, 0.011801004409790039, 65.18972277641296), (7, 1597, 0.013603925704956055, 71.97262597084045), (7, 1703, 0.016966819763183594, 82.92933893203735), (7, 1809, 0.01969313621520996, 90.56469082832336), (7, 1914, 0.023744583129882812, 101.19716310501099), (7, 2021, 0.026981830596923828, 110.77884697914124), (7, 2128, 0.03173089027404785, 121.640958070755)]
bm_times=[(1, 106, 0.00014901161193847656, 9.5367431640625e-07), (1, 212, 0.0002532005310058594, 0.0), (1, 317, 0.0004200935363769531, 0.0003941059112548828), (1, 424, 0.0005340576171875, 0.0005509853363037109), (1, 532, 0.0010678768157958984, 0.0006930828094482422), (1, 639, 0.0008530616760253906, 0.0008389949798583984), (1, 745, 0.0010433197021484375, 0.001008749008178711), (1, 851, 0.0018138885498046875, 0.0012600421905517578), (1, 958, 0.0014908313751220703, 0.0014369487762451172), (1, 1066, 0.0022640228271484375, 0.0016798973083496094), (1, 1173, 0.0019550323486328125, 0.0018451213836669922), (1, 1279, 0.0023200511932373047, 0.002140045166015625), (1, 1386, 0.0024340152740478516, 0.002401113510131836), (1, 1491, 0.0035712718963623047, 0.002841949462890625), (1, 1597, 0.0031969547271728516, 0.0030777454376220703), (1, 1703, 0.0034067630767822266, 0.0033600330352783203), (1, 1809, 0.003751039505004883, 0.003674745559692383), (1, 1914, 0.004750967025756836, 0.0040891170501708984), (1, 2021, 0.004498958587646484, 0.00442814826965332), (1, 2128, 0.004817008972167969, 0.004762172698974609), (2, 106, 0.0008451938629150391, 0.0), (2, 212, 0.0018079280853271484, 0.0), (2, 317, 0.0028290748596191406, 0.002897977828979492), (2, 424, 0.00403594970703125, 0.004148006439208984), (2, 532, 0.00544285774230957, 0.005616188049316406), (2, 639, 0.007050037384033203, 0.007353067398071289), (2, 745, 0.008755207061767578, 0.009016752243041992), (2, 851, 0.010912179946899414, 0.011203765869140625), (2, 958, 0.012926101684570312, 0.01287388801574707), (2, 1066, 0.015316963195800781, 0.01549220085144043), (2, 1173, 0.01810002326965332, 0.01789999008178711), (2, 1279, 0.02045297622680664, 0.02056407928466797), (2, 1386, 0.023358821868896484, 0.023309946060180664), (2, 1491, 0.02699589729309082, 0.026440858840942383), (2, 1597, 0.029495716094970703, 0.029460906982421875), (2, 1703, 0.03256988525390625, 0.032705068588256836), (2, 1809, 0.03626894950866699, 0.035984039306640625), (2, 1914, 0.04044389724731445, 0.040040016174316406), (2, 2021, 0.04343581199645996, 0.04332613945007324), (2, 2128, 0.04682588577270508, 0.04694318771362305), (3, 106, 0.0011858940124511719, 9.5367431640625e-07), (3, 212, 0.005214214324951172, 0.0), (3, 317, 0.012579202651977539, 0.029122114181518555), (3, 424, 0.02563619613647461, 0.04135608673095703), (3, 532, 0.042111873626708984, 0.05582690238952637), (3, 639, 0.0664670467376709, 0.07194113731384277), (3, 745, 0.09460616111755371, 0.08682489395141602), (3, 851, 0.13574981689453125, 0.10996627807617188), (3, 958, 0.18378973007202148, 0.13009214401245117), (3, 1066, 0.15109705924987793, 0.15250301361083984), (3, 1173, 0.17177200317382812, 0.17373895645141602), (3, 1279, 0.19941306114196777, 0.2023768424987793), (3, 1386, 0.2268538475036621, 0.22926688194274902), (3, 1491, 0.25860095024108887, 0.2606799602508545), (3, 1597, 0.2898530960083008, 0.2918229103088379), (3, 1703, 0.32352209091186523, 0.32709407806396484), (3, 1809, 0.3600339889526367, 0.36025094985961914), (3, 1914, 0.3955690860748291, 0.3955190181732178), (3, 2021, 0.43302488327026367, 0.4323451519012451), (3, 2128, 0.4691481590270996, 0.4708867073059082), (4, 106, 0.0012979507446289062, 0.0), (4, 212, 0.005221128463745117, 0.0), (4, 317, 0.01335906982421875, 0.2991938591003418), (4, 424, 0.02468132972717285, 0.406329870223999), (4, 532, 0.04285097122192383, 0.5659918785095215), (4, 639, 0.06550812721252441, 0.7058517932891846), (4, 745, 0.09502410888671875, 0.8855540752410889), (4, 851, 0.1350700855255127, 1.0862770080566406), (4, 958, 0.18218612670898438, 1.2778890132904053), (4, 1066, 0.24150967597961426, 1.5224897861480713), (4, 1173, 0.3090019226074219, 1.7477822303771973), (4, 1279, 0.3785820007324219, 2.0234599113464355), (4, 1386, 0.4750819206237793, 2.2835352420806885), (4, 1491, 0.5754449367523193, 2.607523202896118), (4, 1597, 0.693234920501709, 2.936108112335205), (4, 1703, 0.8368511199951172, 3.25032901763916), (4, 1809, 0.9683549404144287, 3.5951521396636963), (4, 1914, 1.1354990005493164, 3.954470157623291), (4, 2021, 1.3007230758666992, 4.326147794723511), (4, 2128, 1.5065038204193115, 4.726133108139038), (5, 106, 0.0011970996856689453, 0.0), (5, 212, 0.005138874053955078, 0.0), (5, 317, 0.01327204704284668, 2.9953768253326416), (5, 424, 0.023918867111206055, 4.173291921615601), (5, 532, 0.04206991195678711, 5.613408088684082), (5, 639, 0.06557011604309082, 7.041341066360474), (5, 745, 0.09462499618530273, 8.849971055984497), (5, 851, 0.1362168788909912, 10.955773115158081), (5, 958, 0.181138277053833, 12.677404165267944), (5, 1066, 0.24100089073181152, 15.212114095687866), (5, 1173, 0.31142187118530273, 17.84725284576416), (5, 1279, 0.37047910690307617, 20.167813062667847), (5, 1386, 0.4739699363708496, 22.728447914123535), (5, 1491, 0.578881025314331, 26.034712076187134), (5, 1597, 0.6952719688415527, 29.341695070266724), (5, 1703, 0.82492995262146, 32.41292715072632), (5, 1809, 0.958327054977417, 35.84474492073059), (5, 1914, 1.1109201908111572, 39.35208511352539), (5, 2021, 1.2947659492492676, 43.32407593727112), (5, 2128, 1.4873428344726562, 46.89781904220581), (6, 106, 0.0012209415435791016, 9.5367431640625e-07), (6, 212, 0.005218029022216797, 0.0), (6, 317, 0.012723922729492188, 28.982542037963867), (6, 424, 0.024788379669189453, 40.683178186416626), (6, 532, 0.04239225387573242, 55.73279285430908), (6, 639, 0.06558012962341309, 71.66633200645447), (6, 745, 0.0928046703338623, 87.04032325744629), (6, 851, 0.13866925239562988, 111.10778903961182), (6, 958, 0.18184494972229004, 127.33903193473816), (6, 1066, 0.23765206336975098, 152.52398920059204), (6, 1173, 0.30180811882019043, 175.34903287887573), (6, 1279, 0.3846421241760254, 201.74338030815125), (6, 1386, 0.47894930839538574, 229.73318600654602), (6, 1491, 0.5816681385040283, 259.4572169780731), (6, 1597, 0.6897709369659424, 293.989018201828), (6, 1703, 0.8346512317657471, 323.93333983421326), (6, 1809, 0.9631898403167725, 359.6625292301178), (6, 1914, 1.1342401504516602, 393.9420828819275), (6, 2021, 1.2912929058074951, 433.9612469673157), (6, 2128, 1.5112321376800537, 471.8241317272186), (7, 106, 0.0012249946594238281, 0.0), (7, 212, 0.005445957183837891, 0.0), (7, 317, 0.012856006622314453, 290.24047803878784), (7, 424, 0.024908065795898438, 407.2782437801361), (7, 532, 0.04185605049133301, 545.1342260837555), (7, 639, 0.06462693214416504, 708.6984059810638), (7, 745, 0.09434700012207031, 869.8757622241974), (7, 851, 0.13716816902160645, 1094.4000298976898), (7, 958, 0.1807248592376709, 1278.5638537406921), (7, 1066, 0.2386460304260254, 1504.8801128864288), (7, 1173, 0.30318117141723633, 1759.404639005661), (7, 1279, 0.38372111320495605, 2015.7258400917053), (7, 1386, 0.4756200313568115, 2301.8455798625946), (7, 1491, 0.5763659477233887, 2604.667510032654), (7, 1597, 0.7074391841888428, 2930.4712929725647), (7, 1703, 0.8254721164703369, 3247.4821190834045), (7, 1809, 0.9592609405517578, 3600.2377898693085), (7, 1914, 1.1448078155517578, 3936.8345839977264), (7, 2021, 1.317857027053833, 4340.388192176819), (7, 2128, 1.5045907497406006, 4725.185062170029)]




# dictionary creation
count=0
gen_rsw={}  #data for generation in rsw time lock puzzle
gen_bm={} #data for generation in bm time lock puzzle
res_rsw={} #data for resolution in rsw time lock puzzle
res_bm={} #data for resolution in bm time lock puzzle

gen_rsw_xaxis=[]
gen_bm_xaxis=[]
res_rsw_xaxis=[]
res_bm_xaxis=[]

gen_rsw_yaxis=[]
gen_bm_yaxis=[]
res_rsw_yaxis=[]
res_bm_yaxis=[]

for i in range(0,140,20):
    count+=1
    gen_rsw[count]=[]
    gen_bm[count]=[] 
    res_rsw[count]=[] 
    res_bm[count]=[] 
    for j in range(20):
        gen_bm[count].append((bm_times[i+j][1],bm_times[i+j][2]))
        res_bm[count].append((bm_times[i+j][1],bm_times[i+j][3]))
        gen_rsw[count].append((rsw_times[i+j][1],rsw_times[i+j][2]))
        res_rsw[count].append((rsw_times[i+j][1],rsw_times[i+j][3]))
        
        if count ==7:
            
            print("rsw_times[j][0]=",rsw_times[i+j][0])
            gen_rsw_xaxis.append(rsw_times[i+j][1])
            gen_bm_xaxis.append(bm_times[i+j][1])
            res_rsw_xaxis.append(rsw_times[i+j][1])
            res_bm_xaxis.append(bm_times[i+j][1])

            gen_rsw_yaxis.append(rsw_times[i+j][2])
            gen_bm_yaxis.append(bm_times[i+j][2])
            res_rsw_yaxis.append(rsw_times[i+j][3])
            res_bm_yaxis.append(bm_times[i+j][3])     




print(gen_rsw_xaxis)
print(gen_bm_xaxis)
print(res_rsw_xaxis)
print(res_bm_xaxis)
print()
print(gen_rsw_yaxis)
print(gen_bm_yaxis)
print(res_rsw_yaxis)
print(res_bm_yaxis)





plt.figure(1) # 4x4 of generation,resolution for bm,rsw

plt.subplot(221)
plt.plot(gen_rsw_xaxis,gen_rsw_yaxis)
# plt.plot(gen_rsw_yaxis)

x=np.array(gen_rsw_xaxis)
y=np.array(gen_rsw_yaxis)
A = np.vstack([x, np.ones(len(x))]).T
m,c=np.linalg.lstsq(A, y)[0]
plt.plot(x,m*x+c, c='red')
plt.xlabel('Nbits of Module')
plt.ylabel('Time in secs')
plt.title('TLP generation with RSW')


plt.subplot(222)
x=np.array(gen_bm_xaxis)
y=np.array(gen_bm_yaxis)
A = np.vstack([x, np.ones(len(x))]).T
m,c=np.linalg.lstsq(A, y)[0]
plt.plot(gen_bm_xaxis,gen_bm_yaxis)
plt.plot(x,m*x+c, c='red')
plt.xlabel('Nbits of Module')
plt.ylabel('Time in secs')
plt.title('TLP generation with BM')

plt.subplot(223)
x=np.array(res_rsw_xaxis)
y=np.array(res_rsw_yaxis)
A = np.vstack([x, np.ones(len(x))]).T
m,c=np.linalg.lstsq(A, y)[0]
plt.plot(res_rsw_xaxis,res_rsw_yaxis)
plt.plot(x,m*x+c, c='red')
plt.xlabel('Nbits of Module')
plt.ylabel('Time in secs')
plt.title('TLP resolution with RSW')

plt.subplot(224)
x=np.array(res_bm_xaxis)
y=np.array(res_bm_yaxis)
A = np.vstack([x, np.ones(len(x))]).T
m,c=np.linalg.lstsq(A, y)[0]
plt.plot(res_bm_xaxis,res_bm_yaxis)
plt.plot(x,m*x+c, c='red')
plt.xlabel('Nbits of Module')
plt.ylabel('Time in secs')
plt.title('TLP resolution with BM')

# plt.show()


plt.figure(2) # 2x1 of generation,resolution for bm,rsw
plt.subplot(211)
plt.plot(gen_rsw_xaxis,gen_rsw_yaxis,label="RSW Method")
plt.plot(gen_bm_xaxis,gen_bm_yaxis,label="BM Method")
plt.xlabel('Nbits of Module')
plt.ylabel('Time in secs')
plt.title('TLP generation with RSW and BM')
plt.legend()
plt.grid()

plt.subplot(212)
plt.plot(res_rsw_xaxis,res_rsw_yaxis,label="RSW Method")
plt.plot(res_bm_xaxis,res_bm_yaxis,label="BM Method")
plt.xlabel('Nbits of Module')
plt.ylabel('Time in secs')
plt.title('TLP resolution with RSW and BM')
plt.legend()
plt.grid()
plt.show()
